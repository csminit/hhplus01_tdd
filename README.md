# hhplus01_tdd

## [항해 플러스 백엔드 1주차 ]
## TDD 시작하기

### 작업 내용
- 3월 19일 화요일
    - TDD 기본 지식 학습
    - PointService TDD 기반으로 작성
        - {포인트 조회}, {포인트 충전}, {포인트 사용}, {이용 내역} 단위 테스트 및 개발
    - PointController API 작성
    - {포인트 충전}, {포인트 사용} 동시성 제어 코드 추가
    - *~controller 통합 테스트 작성 중*
- 3월 20일 수요일
    - 객체 기능별로 분리
    - controller 단위 테스트 작성

### 기능 개발
- 포인트 조회, 포인트 충전, 포인트 사용, 이용 내역 개발
- 포인트 충전 및 포인트 사용 시 동시성 제어 방법
    - 메모리단에서 제어하는 방법 선택 : DB가 구현되지 않았으므로 ReentrantLock을 이용하여 제어
### 테스트 작성
- 서비스 단위 테스트 작성 (성공, 실패 케이스 별로)
- 컨트롤러 단위 테스트 작성 (동작 유무)
- 컨트롤러 통합 테스트 작성 중
    - RestTemplate으로 patch 호출 세팅하려고 했으나 잘 안 됨.
    - RestAssured를 이용할 지, patch 호출을 계속 세팅해볼 지 고민중


### 생각의 흐름

#### TDD 방식으로 개발하며
개발 흐름 : ((단위 테스트 → 로직 개발) *반복) 서비스 로직 개발 완료 → 컨트롤러 통합 테스트
* 탑다운 방식으로도 개발 연습 필요 *

#### 동시성 제어 방식
- 아무것도 이용하지 않는 방법
- 메모리단 : 성능 저하, 병목 현상 필연적
    - syncronized
    - ReentrantLock
- DB를 이용하는 방법
    - 낙관적 락
    - 비관적 락 : DB cpu 많이 먹음
- 분산 락
    - Redis

#### 테스트 단위
- 단위테스트 : 단일 모듈
- 통합테스트 : 멀티 모듈
- e2e : 웹페이지 프론트에서부터 백엔드를 거쳐 다시 종단까지 포함
